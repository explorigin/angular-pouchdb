// Generated by CoffeeScript 1.6.3
(function() {
  describe('angular-pouchdb', function() {
    beforeEach(module('pouchdb'));
    it("should be able to create a pouchdb database", inject(function(pouchdb, $rootScope) {
      var db, docId, orig;
      docId = '' + Math.random();
      db = pouchdb.create(docId);
      orig = new PouchDB(docId);
      return expect(db.type()).toBe(orig.type());
    }));
    return it("should be able to create a document", inject(function(pouchdb, $rootScope, $timeout) {
      var db, doc, docId, orig, rev;
      db = pouchdb.create('test');
      orig = new PouchDB('test');
      docId = '' + Math.random();
      doc = null;
      rev = null;
      runs(function() {
        var promise;
        promise = db.put({
          _id: docId,
          name: 'Bob'
        });
        return promise.then(function(output) {
          expect(output.ok).toBe(true);
          expect(output.id).toBe(docId);
          return rev = output.rev;
        }, function(err) {
          return expect(err).toBeUndefined();
        });
      });
      waitsFor(function() {
        var e;
        try {
          $timeout.flush();
        } catch (_error) {
          e = _error;
        }
        return rev !== null;
      }, "db.put to complete.", 2000);
      runs(function() {
        return orig.get(docId, function(err, doc) {
          if (err) {
            return expect(err).toBeUndefined();
          } else {
            expect(doc._id).toBe(docId);
            expect(doc._rev).toBe(rev);
            expect(doc.name).toBe('Bob');
            return rev = null;
          }
        });
      });
      waitsFor(function() {
        return rev === null;
      }, "orig.get to complete", 2000);
      return runs(function() {
        return expect(true).toBe(true);
      });
    }));
  });

}).call(this);

/*
//@ sourceMappingURL=angular-pouchdb-spec.map
*/
